# Bilibili 直播弹幕插件（官方WebSocket版）配置文件

# === 基本配置 ===
enabled = false # 是否启用插件，默认关闭，需要配置后手动启用

# === 官方API配置 ===
# 以下配置项需要在 B站开放平台申请获取
# 申请地址: https://live-open.biliapi.com/
id_code = ""                               # 主播身份码
app_id = 0                                 # 应用ID
access_key = ""
access_key_secret = ""
api_host = "https://live-open.biliapi.com" # API地址，通常不需要修改

# === 消息处理配置 ===
# 是否处理不同类型的消息
handle_enter_messages = true     # 是否处理进入直播间消息
handle_gift_messages = true      # 是否处理礼物消息
handle_guard_messages = true     # 是否处理守护消息
handle_superchat_messages = true # 是否处理醒目留言消息

# === 消息缓存配置 ===
message_cache_size = 1000 # 消息缓存最大数量

# === 退出配置 ===
shutdown_timeout = 30 # 优雅关闭超时时间（秒）

# === 群组信息配置 ===
enable_group_info = false # 是否启用群组信息
group_id = ""             # 群组ID，留空则使用房间ID
group_name = ""           # 群组名称，留空则使用 "bili_{房间ID}"

# === 消息格式配置 ===
content_format = ["text"] # 内容格式
accept_format = ["text"]  # 接受格式

# === 模板信息配置 ===
enable_template_info = false # 是否启用模板信息
template_name = ""           # 模板名称，留空则使用 "bili_{房间ID}"

# 模板项（当 enable_template_info = true 时使用）
[template_items]
default_generator_prompt = """
{expression_habits_block}
{tool_info_block}
{knowledge_prompt}
{memory_block}
{relation_info_block}
{extra_info_block}

{chat_target}
{time_block}
{chat_info}
{reply_target_block}
{identity}

{action_descriptions}
你正在{chat_target_2},现在请你读读之前的弹幕内容，{mood_prompt}，请你给出回复
{config_expression_style}。
请回复的平淡一些，简短一些，说中文，不要刻意突出自身学科背景，注意不要复读你说过的话。
{keywords_reaction_prompt}
请注意不要输出多余内容(包括前后缀，冒号和引号，at或 @等 )。只输出回复内容。
{moderation_prompt}
不要浮夸，不要夸张修辞，不要输出多余内容(包括前后缀，冒号和引号，括号()，表情包，at或 @等 )。只输出回复内容"""

default_expressor_prompt = """
{expression_habits_block}
{relation_info_block}

{chat_target}
{time_block}
{chat_info}
{identity}

你正在{chat_target_2},{reply_target_block}
对这句弹幕，你想表达，原句：{raw_reply},原因是：{reason}。你现在要思考怎么组织回复
你需要使用合适的语法和句法，参考直播弹幕内容，组织一条日常且口语化的回复。请你修改你想表达的原句，符合你的表达风格和语言习惯
{config_expression_style}，你可以完全重组回复，保留最基本的表达含义就好，但重组后保持语意通顺。
{keywords_reaction_prompt}
{moderation_prompt}
不要浮夸，不要夸张修辞，平淡且不要输出多余内容(包括前后缀，冒号和引号，括号，表情包，at或 @等 )，只输出一条回复就好。
现在，你说：
"""

chat_target_group1 = "你正在直播间里和观众互动，下面是直播间的弹幕内容："
chat_target_private1 = "你正在和{sender_name}互动，这是之前的弹幕内容："
chat_target_group2 = "在直播间与观众互动"
chat_target_private2 = "回复{sender_name}的弹幕"
knowledge_prompt = "\n你有以下这些**知识**：\n{prompt_info}\n请你**记住上面的知识**，之后可能会用到。\n"

template_name = "live"
template_default = false

context_tags = []
# === 上下文标签配置 ===
# 控制从 prompt_context 服务获取哪些标签的上下文
# 设置为 null 或空数组表示获取所有上下文
# 示例配置:
# context_tags = ["bili_danmaku", "recent_chat"]
